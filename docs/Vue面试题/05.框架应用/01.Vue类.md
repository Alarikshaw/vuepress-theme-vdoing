---
title: Vue类
date: 2021-03-18 13:51:10
permalink: /pages/578232/
categories:
  - JavaScript面试题
  - 框架应用
tags:
  - Vue
  - 面试题
---

## 写 `React / Vue` 项目时为什么要在列表组件中写 `key`，其作用是什么？

v-for一般用在列表的渲染，渲染的时候会默认遵守就地复用策略。

就地复用策略：

```html
当 Vue 正在更新使用 v-for 渲染的元素列表时，它默认使用“就地更新”的策略。如果数据项的顺序被改变，Vue 将不会移动 DOM 元素来匹配数据项的顺序，而是就地更新每个元素，并且确保它们在每个索引位置正确渲染。

这种方式只适用于列表渲染不依赖子组件状态，或临时 DOM 状态变化。
```

`vue` 和 `react` 都是采用 `diff` 算法来对比新旧虚拟节点，从而更新节点。

在 `vue` 的 `diff` 函数交叉对比中，当新节点跟旧节点`头尾交叉对比`没有结果时，会根据新节点的 `key` 去对比旧节点数组中的 `key`，从而找到相应旧节点（这里对应的是一个 `key => index` 的 `map` 映射）。

如果没有找到就认为是一个新增节点。

而如果没有 `key`，那么就会采用遍历查找的方式去找到对应的旧节点。

种一个 `map` 映射，另一种是遍历查找。

相比而言，`map` 映射的速度更快。